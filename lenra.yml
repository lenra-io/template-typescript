componentsApi: "1.0"
generator:
  dofigen:
    builders:
      - name: builder
        from: "docker.io/bitnami/node:16"
        adds:
          - .
        script:
          - npm i
    from: "docker.io/bitnami/node:16"
    workdir: /app
    root:
      script:
        - chown -R 1000 /app
    script:
      - npm i --omit=dev
    cmd:
      - node
      - server.js
    ports:
      - 3000
    envs:
      suppress_lock: "true"
    healthcheck:
      cmd: curl --fail http://localhost:8080/_/health
      start: 3s
      interval: 3s
      timeout: 1s
    ignores:
      - "**"
      - "!/*.json"
      - "!/server.js"
      - "!/index.js"
      - "!/listeners/"
      - "!/resources/"
      - "!/services/"
      - "!/views/"
